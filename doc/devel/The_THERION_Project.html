<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
<title>The THERION Project</title>
</head>

<body bgcolor="#FFFFFF">

<h1 align="center">Projekt THERION </h1>

<h2>Základná filozofia:</h2>

<p>Celý systém je predov¹etkým urèený na komplexné
spravovanie a spracovanie rôznych údajov získaných z jaskýò
pri ich prieskume. Takisto sa predpokladá jeho pou¾itie aj pri
iných èinnostiach súvisiacich s prácou v podzemí, ako je
spracovanie banských diel, lo¾ísk, skládok a podobne.</p>

<p><b>Ako vstupné údaje pre program slú¾ia:</b></p>

<ul>
    <li>meraèské údaje získané ¹tandardnými geodetickými
        metódami</li>
    <li>mapové podklady (obyèajne odvíjajúce sa z týchto
        meraní)</li>
    <li>analýzy a pozorovania rôznych druhov (geologické,
        geochemické, geofyzikálne, mikroklimatické,
        archeologické) vz»ahujúce sa na zamerané objekty</li>
    <li>rôzny iný dokumentaèný materiál (fotografie, popisy,
        audiovizuálne záznamy)</li>
</ul>

<p><b>Výstupom z programu má by» predov¹etkým:</b></p>

<ul>
    <li>trojrozmerný model jaskyne (bane, lo¾iska, ...) s
        mo¾nostou adekvátneho zobrazenia èo najväc¹ieho
        poètu zadaných údajov</li>
    <li>presná a podrobná dvojrozmerná mapa dokumentaèného
        chrakteru</li>
    <li>výsledky prieskumu vo forme prehµadných tabuliek a
        formulárov </li>
    <li>relaèná databáza v¹etkých zadaných údajov urèená
        na ïal¹ie spracovanie</li>
</ul>

<p>Program samotný je navrhnutý ako obiektovo orientovaná
kni¾nica. Takáto ¹truktúra je toti¾ prehµadná a µahko
roz¹íriteµná. Aby sa neprogramovali veci, ktoré u¾
naprogramované sú a takisto aby program nebol závislý na
pou¾itej poèítaèovej platforme, celý program bude
naprogramovaný v nasledovných jazykoch a za pou¾itia týchto
programov:</p>

<dl>
    <dt><strong>1. C++</strong></dt>
    <dd>V òom bude naprogramované samotné jadro programu, teda
        objektová kni¾nica potrebná na základné spracovanie
        dát. Takisto aj niektoré jednoduché aplikácie, ktoré
        toto spracovanie pomocou tejto kni¾nice prevedú. Táto
        kni¾nica v¹ak bude otvorená aj pre programovanie v
        skriptovacích jazykoch (hlavne Perl a Tcl/Tk).</dd>
    <dt><strong>1. Perl </strong></dt>
    <dd>V òom bude naprogramovaný systém skriptov, ktoré
        budú konvertova» dáta z rôznych formátov do
        vnútorného formátu systému, a takisto skripty, ktoré
        spracované dáta budú exportova» naspä». Ïalej v
        òom budú naprogramované aj niektoré nároènej¹ie
        spracovávacie skripty (hlavne na textové vstupy),
        ktoré budú pou¾íva» hore uvedenú objektovú
        kni¾nicu. Perl sa pou¾ije aj ako skriptovací jazyk na
        prepojenie s ostatnými programami. </dd>
    <dt><strong>3. VTK </strong></dt>
    <dd>Táto kni¾nica bude slú¾it predov¹etkým na
        interpretáciu a spracovanie základných trojrozmerných
        modelov. Ovládaná bude pomocou Tcl/Tk. </dd>
    <dt><strong>4. T</strong><font size="4"><sub><strong>E</strong></sub></font><strong>X
        </strong></dt>
    <dd>Pou¾ije sa tak na dvojrozmerné mapy a grafy, ako aj
        v¹etky prezentaèné textové a tabuµkové výstupy z
        programu. V¹etky výstupy z neho budú v PostScripte. </dd>
    <dt><strong>5. SQL </strong></dt>
    <dd>Jazyk na databázové aplikácie nad systémom, ktoré
        budú be¾at na nejakom SQL serveri. Tieto aplikácie
        budú ovládané pomocou Tcl/Tk, alebo HTML v závislosti
        od toho, odkiaµ bude u¾ívateµ k systému
        pristupova».</dd>
    <dt><strong>6. Tcl/Tk </strong></dt>
    <dd>V tomto jazyku bude naprogramovaný celý základný
        grafický u¾ívateµský interface. Ten bude zahàòa»
        formuláre na zadávanie objektov (napr. meraní, analýz
        popr. mapové vstupy), formuláre na ovládanie
        spracovania údajov a takisto aj na nastavenie v¹etkých
        parametrov a samotné prevedenie exportu.</dd>
    <dt><strong>7. HTML </strong></dt>
    <dd>Okrem výstupných dokumentov pre internet, bude tento
        jazyk slú¾i» aj na naprogramovanie u¾ívateµského
        interface, pre u¾ívateµov pristupujúcich k systému
        prostredníctvom internetu. </dd>
</dl>

<p>Takisto sa v nevyluèuje ani pou¾itie iných programov a
programovacích jazykov, ktoré s danými doká¾u spolupracovat.</p>

<h2>©truktúra systému:</h2>

<p>Systém je koncipovaný ako objektová kni¾nica. Samotné
programy sú obyèajne u¾ len malými skriptami, ktoré tieto
objekty prepájajú. Základná ¹truktúra tried objektov je
nasledovná:</p>

<dl>
    <dt><code><strong>data_object</strong></code></dt>
    <dd>V¹etci potomkovia tejto triedy sú základné dátové
        ¹truktúry, ktoré sú súèas»ou väè¹ích
        dátových objektov. Sú klasifikované podµa
        priestorovej zlo¾itosti od najjednoduch¹ích
        (abstraktný objekt, bod) a¾ po najzlo¾itej¹ie
        (trojrozmerný povrch). Navzájom sú medzi sebou
        zviazané nasledovne: èiara (<code>polyline</code>) sa
        skladá z bodov, <code>polygon</code> sa skladá z èiar
        a povrch sa skladá z polygónov. Ka¾dý z nich (resp. z
        ich potomkov) reprezentuje nejakú skutoènú entitu,
        ktorej je práve objekt jeho typu najvhodnej¹ou
        reprezentáciou. Tak napríklad reprezentáciou skaly,
        kvapµa alebo vzorky je bod; reprezentáciou vrtu alebo
        meraèského polygónu je èiara (<code>polyline</code>);
        reprezentáciou chodby, ¹tôlne alebo jazera (v 2D mape)
        je <code>polygon</code> (uzavretý mnohouholník), a
        reprezentáciou 3D chodby, ¹tôlne alebo geologického
        telesa je jeho trojrozmerný povrch (<code>surface</code>).
        ©truktúra týchto objektov ïalej umo¾òuje k tejto
        základnej reprezentácii priradi» µubovoµné
        roz¹irujúce vlastnosti. Napríklad pre bod ktorý
        reprezentuje odobratú geologickú vzorku, priradi» jej
        chemické zlo¾enie, petrografický rozbor alebo druh
        vzorky. Èiare ktorá reprezentuje meraèský »ah,
        priradi» mená meraèov alebo presnos» pou¾itej
        metódy. 3D povrchu, ktorý reprezentuje napr. dóm v
        jaskyni priradi» fotografiu ulo¾enú v externom súbore
        alebo báseò ktorú na poèes» jeho objavenia napísali
        jeho objavitelia.</dd>
    <dd>&nbsp;</dd>
    <dt><code><strong>data_set</strong></code></dt>
    <dd>Potomkovia tejto triedy sú objekty, ktoré v sebe
        obsahujú vzájomne prepojené ¹truktúry dátových
        objektov (<code>data_object</code>). Slú¾ia ako
        vstupné údaje pre v¹etky objekty, ktoré s dátami
        pracujú. Táto trieda momentálne obsahuje dve
        podtriedy. Prvou sú meraèské dáta (<code>survey_data</code>),
        ktoré slú¾ia na spravovanie v¹etkých údajov,
        súvisiacich so samotným meraním jaskyne. Druhou sú
        mapové dáta (<code>plot_data</code>), ktoré v sebe
        zahàòajú v¹etky údaje, ktoré sa pou¾ijú na
        výstup.</dd>
    <dt>&nbsp;</dt>
    <dt><code><strong>data_set_io_filter</strong></code></dt>
    <dd>V¹etky objekty tejto triedy slú¾ia ako vstupné alebo
        výstupné objekty. Trieda <code>data_importer</code> má
        za úlohu naèíta» príslu¹né dáta z rôznych
        formátov. Jej výstupom je objekt triedy <code>data_set</code>.
        Naopak trieda exporter má za úlohu vstupný dátový
        objekt vypísa» do µubovoµného podporovaného
        formátu. Na naèítanie a vypísanie dátových
        ¹truktúr prislúchajúcich samotnému programu slú¾ia
        triedy <code>data_reader</code> a <code>data_writer</code>.
        Vnútorný formát systému je binárne textový, aby
        boli tieto súbory prenositeµné a kompatibilné medzi
        jednotlivými verziami tohto systému. Formát, v ktorom
        sa budú samotné údaje zadáva» nie je pova¾ovaný za
        súèas» systému. Preto na spracovanie vstupných
        súborov budú slú¾i» objekty triedy <code>data_importer</code>
        a nie <code>data_rader</code>. Takto je to rie¹ené z
        toho dôvodu, ¾e nijaký univerzálny jazyk ktorý by
        danú problematiku kompletne popisoval neexistuje, a
        navy¹e ka¾dý u¾ívateµ má o zadávaní dát
        vlastnú predstavu. Keï¾e vzhµadom na ¹truktúru
        systému, nie je problém priprogramova» <code>data_importer</code>
        na akýkoµvek (nami obµúbený) formát, nemá zmysel
        sa na nieèo obmedzova». Okrem toho sa pri zadávaní
        údajov predpokladá existencia mnohých textových
        predprocesorov a generátorov vstupných súborov
        (naprogramovaných aj v skriptovacích jazykoch), ako je
        to pri systémoch tohto druhu zvykom.</dd>
    <dt>&nbsp;</dt>
    <dt><code><strong>data_set_process_filter</strong></code></dt>
    <dd>Táto trieda objektov obsahuje samotné spracovávacie
        algoritmy, ktoré sa na dáta budú aplikova». Jej
        potomkovia sa delia podµa toho, aké triedy dát (<code>data_set</code>)
        spracúvajú, a aké triedy dát sú ich výstupom.
        Momentálne obsahuje tri podtriedy. Prvá (<code>survey_data_filter</code>)
        obsahuje objekty na spracovanie meraèských dát
        (nájdenie okruhov, ich vyrovnanie, výpoèet súradníc
        meraèských bodov a pod.), druhá (<code>survey2plot_data_filter</code>)
        prevedie meraèské dáta na dáta za zobrazenie (teda
        napr. zámeru prevedie na èiaru, meraèský bod na bod a
        pod.) a posledná slú¾i na vnútorné spracovanie
        výstupových údajov (rekon¹trukci 3D povrchu zo
        zadaných rezov, základná ¹tatistika, rekon¹trukcia
        hraníc blokov zo zadaných stien a pod.).</dd>
</dl>

<p>Jedným z cieµov systému je aj spracovanie v¹etkých
dostupných údajov, ktoré boli v jaskyni namerané, pozorované
alebo inak zistené. K rie¹eniu tejto problematiky je vo
v¹eobecnosti mo¾né postupova» dvoma spôsobmi. Prvý je
vytvori» pre u¾ívateµa niekoµko základných univerzálnych
objektov (ako sú v na¹om prípade bod, èiara, povrch a pod.) a
pri nich mu da» úplnú voµnos» zádavania èohokoµvek a
kdekoµvek. Druhý spôsob je vytvorenie pomerne zlo¾itej a
komplikovanej ¹truktúry objektov, z ktorých ka¾dý je viac
menej jednoúèelový. Tento systém je priklonený viac k tejto
druhej, ako tej prvej mo¾nosti (aj keï mo¾nos» nadefinova»
akúkoµvek vlastnos» akémukoµvek objektu zostáva). Dôvody
pre takéto rie¹enie sú nasledovné:</p>

<ol>
    <li>Hlavný dôvod preèo je to tak je <strong>systematizácia
        prieskumu</strong>. Ide tu o to, ¾e keï sa v jaskyni
        ide robi» seriózny a systematický výskum na nieèo
        (výskyt netopierov, rozbor sedimentov, klimatológia a
        pod.) v¾dy sa vytvorí najprv urèitá metodika, ktorej
        súèas»ou sú formuláre na zbieranie údajov. Tieto sa
        pri prieskume postupne vypåòajú a nakoniec sa potom
        vlo¾ia do poèítaèa. Na spracovanie takýchto údajov
        je v¹ak potom konkrátny objekt (napr. triedy
        klimatologické pozorovanie) omnoho vhodnej¹í, ako
        univerzálny objekt (v ktorom by napríklad boli ako
        vlastnosti teplota vzduchu, vlhkos», rýchlos» a smer
        vetra a pod.).</li>
    <li>Takto koncipovaná kni¾nica je omnoho menej nároèná
        na pou¾itie pamäte. Ide o to, ¾e keï majú objekty
        konkrétne popísané vlastnosti, staèí ich ¹truktúru
        ma» ulo¾enú iba raz (prostredníctvo definície
        triedy), a v¹etky konkrétne objekty u¾ obsahujú len
        konkrétne údaje. Keby sme v¹ak mali univerzálne
        objekty, pri ka¾dej vlastnosti by musel by» ulo¾ený
        e¹te aj údaj èo je to, ktorý by mnohokrát bol omnoho
        nároènej¹í na pamä» ako samotné dáta, ktoré by
        obsahoval (napr. ak by sme skúmali výskyt bielej
        ¹kvrny na netopieroch, tak údaj by bol <tt>true</tt>,
        ale popis k nemu by musel by» v ¹týle <tt>white_spot_on_bat</tt>).
        Nevraviac u¾ o tom, ¾e pri takomto spôsobe ukladania
        dát by sa údaje zaèali veµmi rýchlo mie¹a» a len
        veµmi »a¾ko by sa v nich udr¾iaval poriadok.</li>
    <li>Jedným z cieµov výstupu je relaèná databáza,
        v¹etkých zadaných údajov. Pri v¹eobecne
        koncipovaných objektoch, je zostavenie takejto databázy
        veµmi nároèná zále¾itos», a ak sú u¾ívatelia
        neporiadni, mô¾e to by» a¾ nerie¹iteµné. Ak v¹ak
        máme objekty z konkrétnymi vlastnos»ami poriadne
        zadefinované podµa v¹etkých pravidiel OOP, takýto
        neporiadok systém ani neumo¾òuje. Nevraviac o tom, ¾e
        na zadávanie takýchto objektov sa dá potom veµmi
        jednoducho pomocou Tcl/Tk vytvori» u¾ívateµský
        interface, ktorý je nie len <em>user friendly</em> ale
        aj veµmi jednoduchý.</li>
    <li>Ïal¹im z cieµov výstupu (a nie zanedbateµným) sú
        prehµadné tabuµky a formuláre, ktoré daný prieskum
        dokumentujú. Mnohé z nich sú u¾ ¹tandardizované
        rôznymi normami a predpismi ktoré hovoria, ako majú
        vyzera». Pri v¹eobecne koncipovaných objektoch by ich
        zostavovanie bolo veµmi nároèné, práve pre túto
        v¹eobecnos». Naopak pri konkrétnych objektoch je to
        úplne naopak, lebo tieto sa dajú vytvori» práve na
        základe týchto noriem, a tak sa u¾ívateµ u¾ mô¾e
        iba te¹i» na parádne výstupy (T<font size="4"><sub>E</sub></font>X).</li>
</ol>

<p>Ïal¹í problém, ktorý pri vytváraní takejto ¹truktúry
mô¾e nasta» je, ¾e nie v¾dy je zrejmé, èo je
najvhodnej¹ou reprezentáciou daného objektu. Napríklad
reprezentáciou merania sklonu tektonickej vrstvy nemá by» èo
iné ako bod, keï¾e tento sklon sa meria v¾dy v jednom mieste,
na nejakom tektonickom zrkadle. Znaèka ktoá sa pou¾ije v mape
alebo 3D modeli by u¾ samozrejme mala by» orientovaná v tomto
smere, ale stále je to údaj vz»ahujúci sa na jeden bod. Pri
chemickej analýze to v¹ak u¾ také zrejmé by» nemusí.
Chemická analýza geologickej vzorky má svoju presnú
¹truktúru a z labáku dostaneme vyplnený ¹tandardný
formulár. Je preto logické, ¾e táto analýza bude jeden
objekt. Na druhej strane v¹ak chemicky sa dá analyzova» vzorka
odobratá z jedného miesta, nejaká metrá¾ vo vrte, alebo
sedimenty v jednej chodbe. V prvom prípade by potom ale
najvhodnej¹ou reprezentáciou na chemickú vzorku bol bod, v
druhom èiara a v tre»om polygón alebo dokonca povrch. Rovnaký
problém nastane aj vtedy, keï z jedného miesta odoberieme
niekoµko vzoriek na rovnakú analýzu. kedy by zase dochádzalo
k zbytoènej duplicite údajov. Èo robi» v takýchto prípadoch?
Jediným rozumným rie¹ením tu je vytvori» objekt chemickej
analýzy ako abstraktný. V ka¾dom konkrétnom prípade potom
u¾ iba vytvori» jednoduchý objekt a ako jednu z jeho
vlastností da» odkaz na prislúchajúcu chemickú analýzu.
Takisto aj príslu¹nej chemickej analýze da» do vlastností
odkaz na tento objekt.</p>

<h2>Základný prehµad objektov:</h2>

<ul>
    <li><tt>data_object</tt><ul>
            <li><tt>abstract</tt><ul>
                    <li><tt>survey</tt></li>
                    <li><tt>plot_plane</tt></li>
                    <li><tt>block</tt></li>
                    <li><tt>entrance</tt></li>
                    <li><tt>survey_loop</tt></li>
                    <li><tt>man</tt></li>
                </ul>
            </li>
            <li><tt>point</tt><ul>
                    <li><tt>survey_point</tt></li>
                    <li><tt>point_fill</tt></li>
                    <li><tt>point_analysis</tt></li>
                </ul>
            </li>
            <li><tt>polyline</tt><ul>
                    <li><tt>survey_shot</tt></li>
                    <li><tt>passage_wall</tt></li>
                    <li><tt>leap_line</tt></li>
                    <li><tt>contour_line</tt></li>
                    <li><tt>fill_border</tt></li>
                    <li><tt>rock</tt></li>
                </ul>
            </li>
            <li><tt>polygon</tt><ul>
                    <li><tt>passage_profile</tt></li>
                    <li><tt>block_fill</tt></li>
                    <li><tt>polygon_fill</tt></li>
                </ul>
            </li>
            <li><tt>surface</tt><ul>
                    <li><tt>passage</tt></li>
                </ul>
            </li>
        </ul>
    </li>
</ul>

<dir>
    <li><tt>data_set </tt><ul>
            <li><tt>survey_data</tt></li>
            <li><tt>plot_data</tt></li>
        </ul>
    </li>
    <li><tt>data_set_io_filter</tt> <ul>
            <li><tt>data_reader </tt><ul>
                    <li><tt>survey_data_reader </tt></li>
                    <li><tt>plot_data_reader </tt></li>
                </ul>
            </li>
            <li><tt>data_importer </tt><ul>
                    <li><tt>XYZ_survey_data_importer </tt></li>
                    <li><tt>XYZ_plot_data_importer </tt></li>
                </ul>
            </li>
            <li><tt>data_writer </tt><ul>
                    <li><tt>survey_data_writer </tt></li>
                    <li><tt>plot_data_writer </tt></li>
                </ul>
            </li>
            <li><tt>data_exporter </tt><ul>
                    <li><tt>XYZ_survey_data_exporter </tt></li>
                    <li><tt>XYZ_plot_data_exporter </tt></li>
                </ul>
            </li>
        </ul>
    </li>
    <li><tt>data_set_process_filter </tt><ul>
            <li><tt>survey_data_filter </tt><ul>
                    <li><tt>loop_finder </tt></li>
                    <li><tt>loop_closer </tt></li>
                    <li><tt>point_calculator </tt></li>
                </ul>
            </li>
            <li><tt>survey2plot_data_filter </tt></li>
            <li><tt>plot_data_filter </tt><ul>
                    <li><tt>basic_survey_statistics </tt></li>
                    <li><tt>passage_profiles_reconstruction </tt></li>
                    <li><tt>block_fill_reconstruction</tt></li>
                </ul>
            </li>
        </ul>
    </li>
</dir>

<p>Vzhµadom na to, ¾e objektová ¹truktúra je stále v
návrhu, nie je tento zoznam v¹etkých plánovaných objektov
úplný. Objektová ¹truktúra bude obsahova» aj pomocné
objekty, ktoré tu takisto nie sú spomenuté.</p>
</body>
</html>
